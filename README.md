# test-bridge
Connect your automated test runs with your test repository.

This script will parse a report generated by a local execution of your tests, and publish results to your test repository.
When included in your CI build, every time you push to your release branch, this script will update the respective test case runs in your
test management tool. 

## Example
```shell
$ mocha # Run your unit tests to generate your report
$ ./reporter.sh
```

This will parse the report generated by mocha, and update all related test cases in your test management tool.

## Supported reporters and test management tools

### CI support
* Codeship

### Reporters
* Mocha JSON reporter ([Mocha reporters](https://mochajs.org/#reporters))
* Karma JSON reporter ([karma-json-reporter](https://www.npmjs.com/package/karma-json-reporter))

### Test management tools
* TestLodge

## How does this work

### Reporter plugins
Reporter plugins process results from local test executions. They will typically parse a report and search for test cases that are linked
with your test repository. Tests in code are linked with test cases in your repository by searching for occurrences of a certain pattern.
For instance, a test case like this
```javascript
describe('Array', function() {
  describe('#indexOf()', function () {
    it('should return -1 when the value is not present #TC02', function () {
      assert.equal(-1, [1,2,3].indexOf(5));
      assert.equal(-1, [1,2,3].indexOf(0));
    });
  });
});
```
will update a test case in your test management tool labeled `TC02`.

### CI Plugins
When test-bridge is included in your CI builds, it can retrieve information about the current build using CI plugins. For instance, when
using git-flow, you can configure test-bridge to only update test results for commits on the release branch.
You can tell test-bridge on which branches to trigger by specifiying a regex pattern. This will also be used to determine the name of the
test run to be updated in your test management tool. The default pattern that will be used is https://regex101.com/r/kS8bR1/1.

### Test management tool plugins
Test management tool plugins take the result from reporter plugins and update all test case runs with the results of the latest test
execution.
